<%= f.fields_for :site_custom_translation, @translation.site_custom_translation || SiteCustomTranslation.new(value: @translation.value) do |ff| %>

  <%= render partial: 'admin/shared/form_errors', locals: {ancestor: @translation} %>

  <% if @translation.new_record? %>

    <div class="form-group <%= 'has-error' unless @translation.errors.messages[:locale].blank? %>">

      <%= f.label :locale, class: 'col-md-2 control-label' %>

      <div class="col-md-5">

        <%= f.select :locale, options_for_select(User.current.allowed_locales.map{|name| [name.upcase, name]}, params[:locale]), {}, class: 'form-control' %>

      </div>

    </div>

    <div class="form-group <%= 'has-error' unless @translation.errors.messages[:key].blank? %>">

      <%= f.label :key, class: 'col-md-2 control-label' %>

      <div class="col-md-5">

        <%= f.text_field :key, class: 'form-control' %>

      </div>

    </div>

  <% else %>

    <div class="form-group">

      <div class="col-md-5 col-md-offset-2">

        <%= @translation.key %>

      </div>

    </div>

  <% end %>

  <div class="form-group <%= 'has-error' unless @translation.errors.messages[:value].blank? %>">

    <%= ff.label :value, class: 'col-md-2 control-label' %>

    <div class="col-md-5">

      <%= ff.text_field :value, class: 'form-control' %>

    </div>

  </div>

<% end %>
