<div class="modal-dialog">

  <div class="modal-content">

    <%= form_for [:admin, @coupon_code], method: :get, url: export_admin_coupon_codes_path, :html => { :class => 'form form-horizontal',
      id: 'export-form',
      style: 'margin-bottom: 0',
      onsubmit: 'jQuery(this).find(".btn.btn-primary").val("Loading, please wait...").attr("disabled", true);'} do |f| %>

    <div class="modal-header">

      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>

      <h4 class="modal-title" id="myModalLabel">Export Form</h4>

    </div>

    <div class="modal-body">

      <div class="form-group">

        <%= f.label :coupon_id, class: 'col-md-2 control-label' %>

        <div class="col-md-10">

          <%= f.text_field :coupon_id, class: 'form-control' %>

        </div>

      </div>

      <div class="form-group">

        <%= f.label :code, class: 'col-md-2 control-label' %>

        <div class="col-md-10">

          <%= f.text_field :code, class: 'form-control' %>

        </div>

      </div>

      <div class="form-group">

        <%= f.label :tracking_user_id, class: 'col-md-2 control-label' %>

        <div class="col-md-10">

          <%= f.text_field :tracking_user_id, class: 'form-control' %>

        </div>

      </div>

      <div class="form-group">

        <%= f.label :is_imported, class: 'col-md-2 control-label' %>

        <div class="col-md-10">

          <%= f.select :is_imported, Option::get_select_options('yes_or_no', true), {include_blank: true}, class: 'form-control' %>

        </div>

      </div>

      <div class="form-group">

        <%= f.label :used_at_from, class: 'col-md-2 control-label' %>

        <div class="col-md-10">

          <%= f.datetime_select :used_at_from, include_blank: true, class: 'form-control' %>

        </div>

      </div>

      <div class="form-group">

        <%= f.label :used_at_to, class: 'col-md-2 control-label' %>

        <div class="col-md-10">

          <%= f.datetime_select :used_at_to, include_blank: true, class: 'form-control' %>

        </div>

      </div>

      <div class="form-group">

        <%= f.label :end_date_from, class: 'col-md-2 control-label' %>

        <div class="col-md-10">

          <%= f.datetime_select :end_date_from, include_blank: true, class: 'form-control' %>

        </div>

      </div>

      <div class="form-group">

        <%= f.label :end_date_to, class: 'col-md-2 control-label' %>

        <div class="col-md-10">

          <%= f.datetime_select :end_date_to, include_blank: true, class: 'form-control' %>

        </div>

      </div>

      <div class="form-group">

        <%= f.label :created_at_from, class: 'col-md-2 control-label' %>

        <div class="col-md-10">

          <%= f.datetime_select :created_at_from, include_blank: true, class: 'form-control' %>

        </div>

      </div>

      <div class="form-group">

        <%= f.label :created_at_to, class: 'col-md-2 control-label' %>

        <div class="col-md-10">

          <%= f.datetime_select :created_at_to, include_blank: true, class: 'form-control' %>

        </div>

      </div>

    </div>



    <div class="modal-footer">

        <%= f.submit 'Export Coupons', :class => 'btn btn-primary' %>

        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>

    </div>

    <% end # form %>

  </div><!-- /.modal-content -->

</div><!-- /.modal-dialog -->

<script type="text/javascript">

jQuery('.select2').select2();

jQuery("#export-form").on('submit', function(){
  expireCookie('download_complete', '/');

  var downloadTimer = window.setInterval( function() {
    var token = getCookie( "download_complete" );

    if( token == 'true' ) {
      window.clearInterval( downloadTimer );
      expireCookie('download_complete', '/');
      jQuery('#myModal').modal('hide');
    }
  }, 1000 );
});

</script>
